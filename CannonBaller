```pascal
{$I Wasplib/osrs.simba}
const
  MAX_RUNTIME_MINUTES = 120;

 type
  ECannonBallState = enum
   (GETTING_BARS,
    HANDLING_SCREEN,
    FINDING_FURNACE,
    WAITING_FOR_MATERIALS,
    DEPOSITING
   );

     TCannonBallForm = record
    Form: TScriptForm;
    MaxRuntimeEdit: TLazEdit;
  end;

    TScript = record
      banklobby,furnacelobby: Tpoint;
      furnace,bankbooth:TRSObject;
      cannonball:TRSbankItem;
    end;
procedure TScript.init;
begin
  Map.Setup([ERSChunk.EDGEVILLE]);

  self.banklobby:= [8296,36454];
  self.furnacelobby:=[8340,36434];

  Self.furnace:= TRSObject.Create(@map.walker,[1,2,4],[[8344,36434]],['Smelt Furnace']);
  Self.furnace.Track:= True;
  Self.furnace.Finder.Colors += [$394E6C, 0.000, EColorSpace.RGB, [1.000, 1.000, 1.000]];

  self.cannonball := new TRSBankItem('Cannonball', -1);
end;

function TScript.GetBars:Boolean;
begin
  bank.open;
  bank.SetQuantity(ERSItemQuantity.ALL);
  bank.Withdraw('Steel bar',True,True);
    sleep (1200,1800);
  bank.Close;
    sleep (600,1200);
  inventory.open;
end;

function TScript.SmeltCB:Boolean;
begin
  Map.Walker.webwalk (self.furnacelobby,0,0,false);
  self.furnace.click (true,2);
    sleepuntil ((make.isopen=True),400,5000);
  Make.Select ('Cannonballs',28,-1);
    writeln 'Sleeping For Program';
      sleepuntil ((inventory.items.count ('Steel bar')<26),300,20000);
end;

function Tscript.WaitingForMaterials:Boolean;
begin
  writeln 'waiting for cannonballs';
  SleepUntil(not Inventory.Items.Contains('Steel bar'),1000,160000);
  writeln 'cannonballs complete';
end;

function Tscript.DepositItems:Boolean;
begin
  Map.Walker.webwalk (self.banklobby,0,0,false);
  bank.open;
  bank.deposit (self.cannonball);
end;

Function Tscript.Getnextaction():ECannonBallState;
begin
  If not Inventory.Items.Contains('Steel bar') and Inventory.Items.Contains ('Cannonball') then
    exit (ECannonBallState.DEPOSITING);
    If Inventory.Items.Count('Steel bar')>25 then
      exit (ECannonBallState.FINDING_FURNACE);
      If inventory.items.count ('Steel bar')>=1 then
        exit (ECannonBallState.WAITING_FOR_MATERIALS);
        If make.isopen then
          exit (ECannonBallState.HANDLING_SCREEN);
          If Inventory.Items.Contains ('Ammo mould') and not Inventory.Items.Contains('Steel bar') then
            exit (ECannonBallState.GETTING_BARS);
end;

Procedure Tscript.Run();
var
  action: ECannonBallState;
begin
 while GetTimeRunning < (MAX_RUNTIME_MINUTES * ONE_MINUTE) do

  begin
    action := Self.GetNextAction;
    WriteLn(action);
    case action of
      ECannonBallState.GETTING_BARS:Self.GetBars;
      ECannonBallState.FINDING_FURNACE:Self.SmeltCB;
      ECannonBallState.WAITING_FOR_MATERIALS:self.WaitingForMaterials;
      ECannonBallState.DEPOSITING:Self.DepositItems;
    end;
  end;
end;

Var
script: Tscript;
begin
  script.init;
  script.run;
end;
```
     
